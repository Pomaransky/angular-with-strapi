@if (post(); as postData) {
  <div class="flex flex-col items-center">
    <div class="flex flex-col w-full max-w-[500px] gap-4">
      <app-post-card [post]="postData" />
      <div class="flex items-center gap-2 p-1">
        <p class="text-sm font-medium opacity-80">
          {{ postData.comments?.length ?? 0 }}
          {{ (postData.comments?.length ?? 0) === 1 ? "comment" : "comments" }}
        </p>
        <button
          type="button"
          class="text-sm text-primary font-medium p-0 border-none bg-transparent cursor-pointer hover:underline"
          (click)="toggleCommentForm()"
        >
          Add comment
        </button>
      </div>
      @if (showCommentForm()) {
        <app-post-form
          placeholder="Write a comment..."
          submitLabel="Comment"
          [rows]="3"
          [parentDocumentId]="postData.documentId"
          (submitForm)="onCommentSubmit($event)"
          #commentFormRef
        />
      }
      @for (comment of postData.comments ?? []; track comment.documentId) {
        <app-post-card [post]="comment" [link]="true" />
      }
    </div>
  </div>
}
