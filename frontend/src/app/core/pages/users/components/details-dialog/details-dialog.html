<p-dialog
  [visible]="visible()"
  [modal]="true"
  styleClass="w-full sm:w-[600px] h-screen"
  [draggable]="false"
  [dismissableMask]="true"
  [closeOnEscape]="true"
  (visibleChange)="visible.set($event)"
  position="right"
>
  <ng-template #headless>
    <div
      class="flex justify-between rounded-xl shadow-xl shadow-primary/30 h-full"
    >
      @if (isLoading()) {
        <div class="flex justify-center items-center w-full">
          <app-spinner />
        </div>
      }
      @if (user(); as userData) {
        <div
          class="w-full flex flex-col items-start p-8 bg-surface-0 dark:bg-surface-900 rounded-xl relative"
        >
          <div class="flex justify-between items-center w-full -mt-20">
            <div
              class="rounded-full bg-primary text-primary-contrast inline-flex justify-center items-center h-24 w-24"
            >
              <i class="pi pi-info-circle !text-3xl"></i>
            </div>
            <p-button
              (click)="visible.set(false)"
              severity="danger"
              icon="pi pi-times"
              class="w-10 h-10"
            />
          </div>

          <span class="font-bold text-2xl block my-6">Profile Details</span>
          <div class="w-full space-y-4">
            <div class="bg-gray-300 rounded-lg shadow-lg p-6">
              <div class="flex items-center space-x-4 mb-6">
                <div
                  class="w-20 h-20 bg-zinc-700 rounded-full flex items-center justify-center"
                >
                  <span class="text-white text-2xl font-bold">
                    {{ userData.username.charAt(0) }}
                  </span>
                </div>
                <div>
                  <h2 class="text-2xl font-bold text-gray-900">
                    {{ userData.username }}
                  </h2>
                  <p class="text-gray-600">{{ userData.email }}</p>
                </div>
              </div>

              <div class="space-y-3">
                <app-data-row
                  label="Document ID"
                  [value]="userData.documentId"
                />
                <app-data-row
                  label="First Name"
                  [value]="userData.firstName || '-'"
                />
                <app-data-row
                  label="Last Name"
                  [value]="userData.lastName || '-'"
                />
                <app-data-row label="Provider" [value]="userData.provider" />
                <app-data-row
                  label="Status"
                  [value]="userData.confirmed ? 'Confirmed' : 'Not Confirmed'"
                  [icon]="
                    userData.confirmed
                      ? 'pi pi-check-circle'
                      : 'pi pi-exclamation-circle'
                  "
                  [valueClass]="
                    userData.confirmed ? 'text-green-600' : 'text-amber-600'
                  "
                />
                <app-data-row
                  label="Account"
                  [value]="userData.blocked ? 'Blocked' : 'Active'"
                  [icon]="userData.blocked ? 'pi pi-ban' : 'pi pi-check'"
                  [valueClass]="
                    userData.blocked ? 'text-red-600' : 'text-green-600'
                  "
                />
                <app-data-row
                  label="About Me"
                  [value]="userData.aboutMe || '-'"
                  [vertical]="true"
                />
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  </ng-template>
</p-dialog>
